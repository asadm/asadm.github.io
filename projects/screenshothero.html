<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/50c0388ca68b070f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/50c0388ca68b070f.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-514908bffb652963.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-d3f8c9f19d92620b.js" defer=""></script><script src="/_next/static/chunks/pages/_app-95a924f6848c8568.js" defer=""></script><script src="/_next/static/chunks/pages/projects/screenshothero-026f225bc6220cd1.js" defer=""></script><script src="/_next/static/ZRO70YqHrB2wG2ROsAew5/_buildManifest.js" defer=""></script><script src="/_next/static/ZRO70YqHrB2wG2ROsAew5/_ssgManifest.js" defer=""></script><script src="/_next/static/ZRO70YqHrB2wG2ROsAew5/_middlewareManifest.js" defer=""></script></head><body><div class="container"><h1 id="logo" class="text-center"><a href="/">Asad<b>Memon</b></a></h1><ul class="menu"><li><a href="/projects">All Projects</a></li><li><a href="/talks">Talks</a></li><li><a target="_blank" href="https://asad.substack.com/">Newsletter</a></li><li><a target="_blank" href="https://github.com/asadm">Github</a></li><li><a target="_blank" href="https://www.linkedin.com/in/memonasad/">LinkedIn</a></li><li><a target="_blank" href="http://instagram.com/snapmemon">Instagram</a></li></ul><div id="__next"><hr/><img src="/projects/screenshothero/icon.png" width="100" style="border-radius:20px"/><h2>Screenshot Hero</h2><p>Screenshot Hero scans through your screenshots (and other saved photos) and makes then instantly searchable by text in them.</p><video style="max-height:100vh;border:1px solid #000" controls="" autoplay=""><source src="/projects/screenshothero/preview.mp4" type="video/mp4"/>Your browser does not support the video tag.</video><h3>Highlights</h3><ul><li>Images are all processed <strong>on-device</strong> and nothing is sent to any server.</li><li>Tested to work with <strong>thousands of images</strong>.</li><li>Best and most <strong>performant OCR technology</strong>.</li></ul><a href="https://apps.apple.com/us/app/screenshot-hero/id1493170794?ls=1"><img style="margin:10px 0px" width="120" src="/projects/screenshothero/badge.png"/></a><hr/><h2>Technical Details</h2><p>I wanted to build a simple utility app that would run OCR through my photos (all 5000+ of them) and make them searchable. I had following constraints for it:</p><ul><li>It has to be <strong>fast</strong>. The UI needs to be fluid even for thousands of images.</li><li>All processing should happen <strong>on-device</strong>, should not be uploading photos to a cloud service.</li><li>I need to <strong>make it quick</strong> (I only had a week allocated for this project).</li></ul><p>I am primarily a web developer and am not a skilled mobile developer. So I attempted this project with three different frameworks and here are my notes:</p><h3>SwiftUI</h3><p>SwiftUI is appealing as it&#x27;s a React-like framework. I wanted to learn SwiftUI but I struggled with the documentation and even writing a simple grid of photos was challenging. The community is tiny so there aren&#x27;t that many samples online either. I really wanted to use this but it was taking a bit too much of my time. Sadly, I had to ditch SwiftUI.</p><h3>Expo.io</h3><p>Expo is a React Native framework which bypasses the whole Android SDK + XCode step of making the app. It&#x27;s very easy to get started and the dev experience is great. Having written a React Native app before, I really wanted this to work. The only problem occured when I wanted to write the OCR part: <code>expo eject</code> workflow is kinda broken. In my case, the <code>CameraRoll</code> API broke due to some unlinked native module when I tried to run it via XCode after ejecting the app. I spent a few hours fixing the native modules but that didn&#x27;t work. </p><p>Without ejecting, I could have gone with <a href="https://github.com/naptha/tesseract.js#tesseractjs">Tessaract.js</a> but it&#x27;s not fast enough to process thousands of images quickly.</p><p>There also isn&#x27;t a way to do background processing with Expo. I feel expo is great for simple CRUD apps for now and will fail you if your app needs a custom functionality.</p><h3>React Native</h3><p>In the end, I had to fallback to what I already knew. I copied views which I had created earlier for expo.io into a new ReactNative project. I then created a custom Swift native module which had all my business logic:</p><ul><li>Methods to fetch all photos and process newer ones.</li><li>Queue to process only N photos concurrently.</li><li>Storage Model, went with <a href="https://github.com/Tencent/MMKV">MKKV</a> as it was quick to set up.</li><li>OCR, used Apple&#x27;s <a href="https://developer.apple.com/documentation/vision">Vision API</a> which is surprisingly accurate and fastest on-device.</li><li>Set up <a href="https://developer.apple.com/documentation/backgroundtasks">BackgroundTasks</a> to schedule photo processing for later, when the app is sent to background mid-processing (remember we may have 10,000+ photos in our queue, each photo takes ~1s to process).</li></ul><h2>Conclusion</h2><p>I learned that React Native is fast enough if used only for views (and maybe lightweight logic) only. I used <code>FlatList</code> for the grid photo view (with some optimizations to lazy load photos) and it is very smooth even for thousands of photos. Real-time searching/filtering is also really smooth. React Native also has great community support.</p><p>This means writing more backend code per platform, which sucks but is straight-forward. It&#x27;s still better than writing front-end for each platform and dealing with all the quirks of each of them.</p><p>Try Screenshot Hero <a href="https://apps.apple.com/us/app/screenshot-hero/id1493170794?ls=1">here</a>.</p></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/projects/screenshothero","query":{},"buildId":"ZRO70YqHrB2wG2ROsAew5","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script><div class="footer"><p>AsadMemon.com [<a href="https://github.com/asadm/asadm.github.io" target="_blank">source code</a>].</p></div></div></body></html>