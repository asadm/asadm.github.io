<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>High Performance Mobile Game Development in HTML5 – Asad Memon</title><meta name="description" content="Asad Memon&#x27;s homepage."/><meta property="og:title" content="High Performance Mobile Game Development in HTML5 – Asad Memon"/><meta property="og:type" content="article"/><meta property="og:url" content="https://asadmemon.comundefined"/><link rel="apple-touch-icon" href="/assets/favicon.png"/><link rel="shortcut icon" href="/assets/favicon.png"/><meta property="og:image" content="https://asadmemon.com/assets/img/main1.jpg"/><meta property="og:description" content="Asad Memon&#x27;s homepage."/><a href="//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,500" rel="stylesheet" type="text/css"></a><meta name="viewport" content="width=device-width, initial-scale=0.8"/><script>
// Head scripts for the site

// google analytics
(function (i, s, o, g, r, a, m) {
  i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
    (i[r].q = i[r].q || []).push(arguments)
  }, i[r].l = 1 * new Date(); a = s.createElement(o),
    m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
  })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

  ga('create', 'UA-58030862-1', 'auto');
  ga('send', 'pageview');

// heap analytics
window.heap = window.heap || [], heap.load = function (e, t) { window.heap.appid = e, window.heap.config = t = t || {}; var r = t.forceSSL || "https:" === document.location.protocol, a = document.createElement("script"); a.type = "text/javascript", a.async = !0, a.src = (r ? "https:" : "http:") + "//cdn.heapanalytics.com/js/heap-" + e + ".js"; var n = document.getElementsByTagName("script")[0]; n.parentNode.insertBefore(a, n); for (var o = function (e) { return function () { heap.push([e].concat(Array.prototype.slice.call(arguments, 0))) } }, p = ["addEventProperties", "addUserProperties", "clearEventProperties", "identify", "removeEventProperty", "setEventProperties", "track", "unsetEventProperty"], c = 0; c < p.length; c++)heap[p[c]] = o(p[c]) };
heap.load("1855799973");
</script><meta name="next-head-count" content="13"/><link rel="preload" href="/_next/static/css/7475da46e5681ddd.css" as="style"/><link rel="stylesheet" href="/_next/static/css/7475da46e5681ddd.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-f0c67226c0552813.js" defer=""></script><script src="/_next/static/chunks/framework-0f8b31729833af61.js" defer=""></script><script src="/_next/static/chunks/main-4f2953e6496bdc12.js" defer=""></script><script src="/_next/static/chunks/pages/_app-4c3c523680929466.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-4d2f0a9f494a9dad.js" defer=""></script><script src="/_next/static/chunks/996-a55ad17571c235cb.js" defer=""></script><script src="/_next/static/chunks/922-2bd5d729f45cbd99.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-4605ffb8eec611e4.js" defer=""></script><script src="/_next/static/-gq5qxpXlwlp2gVLwRquJ/_buildManifest.js" defer=""></script><script src="/_next/static/-gq5qxpXlwlp2gVLwRquJ/_ssgManifest.js" defer=""></script><script src="/_next/static/-gq5qxpXlwlp2gVLwRquJ/_middlewareManifest.js" defer=""></script></head><body><div class="container"><h1 id="logo" class="text-center"><a href="/">Asad<b>Memon</b></a></h1><ul class="menu"><li><a href="/projects">All Projects</a></li><li><a href="/talks">Talks</a></li><li><a href="/blog">Blog</a></li><li><a target="_blank" href="https://asad.substack.com/">Newsletter</a></li><li><a target="_blank" href="https://github.com/asadm">Github</a></li><li><a target="_blank" href="https://www.linkedin.com/in/memonasad/">LinkedIn</a></li><li><a target="_blank" href="http://instagram.com/snapmemon">Instagram</a></li></ul><div id="__next"><div class="mt-4 blog"><h1>High Performance Mobile Game Development in HTML5</h1><div class="meta"><div class="subscribe-text"><a class="" href="/blog/">Back</a> | <a href="/feed.xml">Subscribe with RSS</a> or <a href="https://feedly.com/i/subscription/feed%2Fhttps%3A%2F%2Fasadmemon.com%2Ffeed.xml">via Feedly</a>.</div><br/><span class="date" title="Friday, September 9th 2016">9 years ago<!-- --> | <!-- -->2<!-- --> min read</span></div><p><img src="/assets/blog/old_posts/0__2A8xQZxm0ups4OIl.png"/></p><p>Sometime ago, I had to make a decision on development language / framework for a cross platform mobile game. I had to at the very least support Apple iOS and Android. I already had worked with Cocos2d-x so I could have gone that path. But I wanted to use HTML5 as this was a personal project and there was nobody to stop me.</p><p>It wasn’t because I was afraid of writing code in C++. Infact, I had been making games and prototypes in <a href="https://www.youtube.com/watch?v=WM6sYN-uzcA">XNA</a>, <a href="https://sites.google.com/site/therobotronics/1-programming/bomberman">Irrlicht</a>, <a href="http://apps.microsoft.com/windows/en-us/app/fall-o-water/a066a6bb-8b13-4100-add5-9ca08fb778ac">DirectX</a> and Cocos2d-x.</p><p>There were reasons for this decision, like debugging the game is easier as I would use Chrome DevTools, also I don’t have any iOS or Android devices so testing would have been easier. And, I feel that for some reason, development is faster using JavaScript.</p><p>A possible solution now would have been to develop the core game in JavaScript and wrap it in WebView control on each platform so it acts as a standalone application.</p><p>Tadaaa! Problem Solved!</p><p><img src="/assets/blog/old_posts/0__R9lqaf5C7jXvqHrN.png"/></p><p>The problem now was <strong>performance</strong>!</p><p>To make things worse, this was a physics puzzle game so I had to do real-time simulation of some physics elements and to top that, I had to draw sprites and some hundred lines along with filled polygons on each tick.</p><p><img src="/assets/blog/old_posts/0__7I6vvSHl0RmRGoLj.png"/></p><p>A quick performance test proved that it is quite impossible to do what I wanted using barebone WebView control and JavaScript.</p><p>Enter <strong>CocoonJS!</strong></p><p><img src="/assets/blog/old_posts/0__BC5dUTFQFdnS67a__.png"/></p><p>CocoonJS, like some other similar solutions is an accelerated canvas control. It overrides default <code>&lt;canvas&gt;</code> implementation and accelerates it with OpenGL at the native side of the application.</p><p>What this means in my case is, now browser control does not spend time on rendering. It can just concentrate on physics processing.</p><p>In comparison, the same code (as the above tick loop) was running at 6–10 FPS in normal mobile browser, but now that number is around 40. Clearly showing that drawing was a big bottleneck.</p><p><strong>Getting To The Code</strong></p><p>I was using the amazing createJS library, I did some changes to my code to support CocoonJS. I am releasing the code after some cleanup for you to play with (and use if you feel like).</p><p>I wrote a thin layer over createJS of a tiny SceneManager which helps change the scenes and maintain a Scene stack. It also currently supports fade transition between switching scenes.</p><p><a href="https://github.com/asadlionpk/cocoonjs-createjs-boilerplate">Grab the code from my github.</a></p><p>The code will work in browser too (host it on apache).</p><p>I hope this post will help someone like myself as there isn’t much around on this topic.</p><p>Happy Development! :)</p></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontMatter":{"title":"High Performance Mobile Game Development in HTML5","description":"Sometime ago, I had to make a decision on development language / framework for a cross platform mobile game. I had to at the very least…","date":"2016-09-09T08:39:13.912Z","categories":[],"keywords":[]},"slug":"perf-game-dev","mdxSource":{"compiledSource":"var m=Object.defineProperty,d=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var s=Object.getOwnPropertySymbols;var p=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;var r=(e,a,o)=\u003ea in e?m(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o,n=(e,a)=\u003e{for(var o in a||(a={}))p.call(a,o)\u0026\u0026r(e,o,a[o]);if(s)for(var o of s(a))i.call(a,o)\u0026\u0026r(e,o,a[o]);return e},l=(e,a)=\u003ed(e,h(a));var c=(e,a)=\u003e{var o={};for(var t in e)p.call(e,t)\u0026\u0026a.indexOf(t)\u003c0\u0026\u0026(o[t]=e[t]);if(e!=null\u0026\u0026s)for(var t of s(e))a.indexOf(t)\u003c0\u0026\u0026i.call(e,t)\u0026\u0026(o[t]=e[t]);return o};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(o){var t=o,{components:e}=t,a=c(t,[\"components\"]);return mdx(MDXLayout,l(n(n({},layoutProps),a),{components:e,mdxType:\"MDXLayout\"}),mdx(\"p\",null,mdx(\"img\",n({parentName:\"p\"},{src:\"/assets/blog/old_posts/0__2A8xQZxm0ups4OIl.png\",alt:null}))),mdx(\"p\",null,\"Sometime ago, I had to make a decision on development language / framework for a cross platform mobile game. I had to at the very least support Apple iOS and Android. I already had worked with Cocos2d-x so I could have gone that path. But I wanted to use HTML5 as this was a personal project and there was nobody to stop me.\"),mdx(\"p\",null,\"It wasn\\u2019t because I was afraid of writing code in C++. Infact, I had been making games and prototypes in \",mdx(\"a\",n({parentName:\"p\"},{href:\"https://www.youtube.com/watch?v=WM6sYN-uzcA\"}),\"XNA\"),\", \",mdx(\"a\",n({parentName:\"p\"},{href:\"https://sites.google.com/site/therobotronics/1-programming/bomberman\"}),\"Irrlicht\"),\", \",mdx(\"a\",n({parentName:\"p\"},{href:\"http://apps.microsoft.com/windows/en-us/app/fall-o-water/a066a6bb-8b13-4100-add5-9ca08fb778ac\"}),\"DirectX\"),\" and Cocos2d-x.\"),mdx(\"p\",null,\"There were reasons for this decision, like debugging the game is easier as I would use Chrome DevTools, also I don\\u2019t have any iOS or Android devices so testing would have been easier. And, I feel that for some reason, development is faster using JavaScript.\"),mdx(\"p\",null,\"A possible solution now would have been to develop the core game in JavaScript and wrap it in WebView control on each platform so it acts as a standalone application.\"),mdx(\"p\",null,\"Tadaaa! Problem Solved!\"),mdx(\"p\",null,mdx(\"img\",n({parentName:\"p\"},{src:\"/assets/blog/old_posts/0__R9lqaf5C7jXvqHrN.png\",alt:null}))),mdx(\"p\",null,\"The problem now was \",mdx(\"strong\",{parentName:\"p\"},\"performance\"),\"!\"),mdx(\"p\",null,\"To make things worse, this was a physics puzzle game so I had to do real-time simulation of some physics elements and to top that, I had to draw sprites and some hundred lines along with filled polygons on each tick.\"),mdx(\"p\",null,mdx(\"img\",n({parentName:\"p\"},{src:\"/assets/blog/old_posts/0__7I6vvSHl0RmRGoLj.png\",alt:null}))),mdx(\"p\",null,\"A quick performance test proved that it is quite impossible to do what I wanted using barebone WebView control and JavaScript.\"),mdx(\"p\",null,\"Enter \",mdx(\"strong\",{parentName:\"p\"},\"CocoonJS!\")),mdx(\"p\",null,mdx(\"img\",n({parentName:\"p\"},{src:\"/assets/blog/old_posts/0__BC5dUTFQFdnS67a__.png\",alt:null}))),mdx(\"p\",null,\"CocoonJS, like some other similar solutions is an accelerated canvas control. It overrides default \",mdx(\"inlineCode\",{parentName:\"p\"},\"\u003ccanvas\u003e\"),\" implementation and accelerates it with OpenGL at the native side of the application.\"),mdx(\"p\",null,\"What this means in my case is, now browser control does not spend time on rendering. It can just concentrate on physics processing.\"),mdx(\"p\",null,\"In comparison, the same code (as the above tick loop) was running at 6\\u201310 FPS in normal mobile browser, but now that number is around 40. Clearly showing that drawing was a big bottleneck.\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"Getting To The Code\")),mdx(\"p\",null,\"I was using the amazing createJS library, I did some changes to my code to support CocoonJS. I am releasing the code after some cleanup for you to play with (and use if you feel like).\"),mdx(\"p\",null,\"I wrote a thin layer over createJS of a tiny SceneManager which helps change the scenes and maintain a Scene stack. It also currently supports fade transition between switching scenes.\"),mdx(\"p\",null,mdx(\"a\",n({parentName:\"p\"},{href:\"https://github.com/asadlionpk/cocoonjs-createjs-boilerplate\"}),\"Grab the code from my github.\")),mdx(\"p\",null,\"The code will work in browser too (host it on apache).\"),mdx(\"p\",null,\"I hope this post will help someone like myself as there isn\\u2019t much around on this topic.\"),mdx(\"p\",null,\"Happy Development!\\xA0:)\"))}MDXContent.isMDXComponent=!0;\n","scope":{}},"readingTime":2},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"perf-game-dev"},"buildId":"-gq5qxpXlwlp2gVLwRquJ","isFallback":false,"gsp":true,"scriptLoader":[]}</script><div class="footer"><p>AsadMemon.com [<a href="https://github.com/asadm/asadm.github.io" target="_blank">source code</a>].</p></div></div></body></html>